
const express = require('express'); 
const router = express.Router()
const axios = require("axios")

// fetch(url)
// .then(response => reponse.json()) // with axios we don't need this step
// .then(data => {})

router.get("/virus", async (req, res) => {

    try{
        let dataObj = await axios.get("https://api.covidtracking.com/v1/states/current.json")

        res.render("virus", {
            data: dataObj.data
        })
    }
    catch{
        res.send("error can't get data")
    }
    

    // axios.get("https://api.covidtracking.com/v1/states/current.json")
    // .then(dataObj => {
    //     console.log(dataObj.data[0]);
    //     res.render("virus", {
    //         data: dataObj.data
    //     })
    // })
    // .catch(error => {
    //     res.send(console.error(error))
    // })
})

module.exports = router